name: PR Age Check

on:
  pull_request:
    types: [opened, synchronize, ready_for_review]

jobs:
  check-pr-age:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR Age
        uses: actions/github-script@v7
        with:
          script: |
            const prCreatedAt = new Date(context.payload.pull_request.created_at);
            const now = new Date();
            const ageInDays = (now - prCreatedAt) / (1000 * 60 * 60 * 24);

            if (ageInDays < 7) {
              core.setFailed(`PR must be open for at least 7 days. Currently: ${ageInDays.toFixed(2)} days.`);
            } else {
              console.log(`PR is old enough: ${ageInDays.toFixed(2)} days.`);
            }
